# Common
AVATAR_STORAGE_DIR=storage
AVATAR_ENABLE_CACHE=true

# Default backend (safe/no-ML):
AVATAR_GENERATOR_BACKEND=mock

# --- SadTalker (talking head / lip-sync) ---
# AVATAR_GENERATOR_BACKEND=sadtalker
# AVATAR_SADTALKER_REPO_DIR=../third_party/SadTalker
# AVATAR_SADTALKER_PYTHON=../third_party/SadTalker/.venv/bin/python
# AVATAR_SADTALKER_SIZE=256
# AVATAR_SADTALKER_PREPROCESS=crop        # crop|full|extfull
# AVATAR_SADTALKER_ENHANCER=              # gfpgan|RestoreFormer|(empty to disable)

# --- Stable Video Diffusion (SVD) imageâ†’video ---
# Note: SVD backend does NOT lip-sync; audio is only muxed into the MP4.
#
# Preset: Mac (Apple Silicon / MPS, balanced)
# AVATAR_GENERATOR_BACKEND=svd
# AVATAR_SVD_DEVICE=mps
# AVATAR_SVD_DTYPE=float32
# AVATAR_SVD_DECODE_CHUNK_SIZE=1
# AVATAR_SVD_AUTO_DOWNSCALE=true
# AVATAR_SVD_MPS_MAX_PIXELS=230400        # 640*360
# AVATAR_SVD_WIDTH=640
# AVATAR_SVD_HEIGHT=360
# AVATAR_SVD_NUM_FRAMES=10
# AVATAR_SVD_NUM_INFERENCE_STEPS=30
# AVATAR_SVD_MOTION_BUCKET_ID=60
# AVATAR_SVD_NOISE_AUG_STRENGTH=0.005
# AVATAR_SVD_ENCODE_CRF=18
#
# If you hit OOM, try:
# AVATAR_SVD_MPS_MAX_PIXELS=147456        # 512*288
# AVATAR_SVD_WIDTH=512
# AVATAR_SVD_HEIGHT=288
# AVATAR_SVD_NUM_FRAMES=8
# AVATAR_SVD_NUM_INFERENCE_STEPS=25
# AVATAR_SVD_DTYPE=float32
#
# If OOM still happens:
# AVATAR_SVD_MPS_MAX_PIXELS=82944         # 384*216
# AVATAR_SVD_WIDTH=384
# AVATAR_SVD_HEIGHT=216
# AVATAR_SVD_NUM_FRAMES=6
# AVATAR_SVD_NUM_INFERENCE_STEPS=20
# Note: on MPS, float16 can produce black frames. Prefer float32.
#
# Preset: CUDA (powerful GPU, e.g. RTX 5080)
# AVATAR_GENERATOR_BACKEND=svd
# AVATAR_SVD_DEVICE=cuda
# AVATAR_SVD_DTYPE=float16
# AVATAR_SVD_ENABLE_XFORMERS=true
# AVATAR_SVD_WIDTH=1024
# AVATAR_SVD_HEIGHT=576
# AVATAR_SVD_NUM_FRAMES=25
# AVATAR_SVD_NUM_INFERENCE_STEPS=50
# AVATAR_SVD_DECODE_CHUNK_SIZE=16
